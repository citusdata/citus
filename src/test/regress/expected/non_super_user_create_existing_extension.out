CREATE SCHEMA non_super_user_create_existing_extension;
SET search_path TO non_super_user_create_existing_extension;
SELECT CURRENT_USER;
 current_user
---------------------------------------------------------------------
 postgres
(1 row)

CREATE EXTENSION if not exists "uuid-ossp" SCHEMA public;
CREATE EXTENSION if not exists "uuid-ossp" SCHEMA public;
NOTICE:  extension "uuid-ossp" already exists, skipping
CREATE USER non_super_user_ext;
SET ROLE non_super_user_ext;
SELECT CURRENT_USER;
    current_user
---------------------------------------------------------------------
 non_super_user_ext
(1 row)

CREATE EXTENSION if not exists "uuid-ossp" SCHEMA public;
NOTICE:  extension "uuid-ossp" already exists, skipping
RESET ROLE;
SELECT CURRENT_USER;
 current_user
---------------------------------------------------------------------
 postgres
(1 row)

DROP USER non_super_user_ext;
DROP SCHEMA non_super_user_create_existing_extension CASCADE;
